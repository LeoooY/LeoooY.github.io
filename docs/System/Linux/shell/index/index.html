<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.62">
<title data-react-helmet="true">index | DocsShare</title><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="index | DocsShare"><meta data-react-helmet="true" name="description" content="参考：《Linux命令行与shell脚本编程大全》第三版"><meta data-react-helmet="true" property="og:description" content="参考：《Linux命令行与shell脚本编程大全》第三版"><meta data-react-helmet="true" property="og:url" content="https://leoooy.github.io//docs/System/Linux/shell/index"><link data-react-helmet="true" rel="shortcut icon" href="/img/leo.png"><link data-react-helmet="true" rel="canonical" href="https://leoooy.github.io//docs/System/Linux/shell/index"><link rel="stylesheet" href="/styles.fcc05d64.css">
<link rel="preload" href="/styles.da09b0aa.js" as="script">
<link rel="preload" href="/runtime~main.872dded8.js" as="script">
<link rel="preload" href="/main.2f1d5848.js" as="script">
<link rel="preload" href="/1.f45b894e.js" as="script">
<link rel="preload" href="/2.a477ba05.js" as="script">
<link rel="preload" href="/3.b78202e8.js" as="script">
<link rel="preload" href="/1be78505.89b8407a.js" as="script">
<link rel="preload" href="/171.d3ef19ea.js" as="script">
<link rel="preload" href="/935f2afb.43a6fc9a.js" as="script">
<link rel="preload" href="/17896441.30e2172e.js" as="script">
<link rel="preload" href="/ca4bd4f8.685a2fb6.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/leo.png" alt="My Site Logo"><strong class="navbar__title">My DocsShare</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Notes</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/LeoooY" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><a href="https://juejin.im/user/5bebc171e51d4511a8090edb/posts" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">掘金</a><a href="https://twitter.com/LeoY233" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Twitter</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/leo.png" alt="My Site Logo"><strong class="navbar__title">My DocsShare</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs">Notes</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/LeoooY" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a href="https://juejin.im/user/5bebc171e51d4511a8090edb/posts" target="_blank" rel="noopener noreferrer" class="menu__link">掘金</a></li><li class="menu__list-item"><a href="https://twitter.com/LeoY233" target="_blank" rel="noopener noreferrer" class="menu__link">Twitter</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><div><span class="badge badge--secondary">Version: Next</span></div><header><h1 class="docTitle_1Lrw">index</h1></header><div class="markdown"><p>参考：《Linux命令行与shell脚本编程大全》第三版
内容概述</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 第一部分 主要是命令行</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">认识shell</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">访问shell</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">基本的shell命令</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">更高级的系统shell命令</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">理解shell的用途</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">使用shell变量来操作数据</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">理解linux文件系统和安全</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">在命令行上使用linux文件系统</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">命令行/终端安装和更新软件</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">编辑器写shell脚本</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 第二部分 主要是shell脚本基础</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">创建和运行shell脚本</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">了解shell脚本中程序的流程</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">迭代代码片段</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">在脚本中处理用户输入的数据</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">脚本中存储和输出数据的方法</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">控制脚本的运行方式和时机（计划任务）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 第三部分 深入shell脚本</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">创建函数</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">与GUI交互</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">过滤解析数据文件</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">正则表达式</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">操作数据的更多方法</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">从原始数据生产报表</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">移植shell脚本到不同的linux平台</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 第四部分 shell脚本在真实场景的应用</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">将各种脚本特性融入到自己的脚本中</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">数据库操作，网络操作</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">与系统交互</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="第一章-初始linux-shell"></a>第一章 初始Linux Shell<a aria-hidden="true" tabindex="-1" class="hash-link" href="#第一章-初始linux-shell" title="Direct link to heading">#</a></h2><p>1.1 什么是Linux</p><ul><li>Linux内核</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">系统内存管理</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">软件程序管理</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">硬件设备管理</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">文件系统管理</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><ul><li>GNU工具</li><li>Linux桌面环境</li></ul><p>1.2 Linux发行版</p><ul><li>核心Linux发行版</li><li>特殊用途的Linux发行版</li><li>Linux Live CD</li></ul><p>1.3 小结</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="第二章-走进shell"></a>第二章 走进shell<a aria-hidden="true" tabindex="-1" class="hash-link" href="#第二章-走进shell" title="Direct link to heading">#</a></h2><ul><li>访问命令行</li><li>通过Linux控制台终端访问 <code>tty文本模式</code></li><li>通过图形化终端仿真器访问 <code>terminal</code><ul><li>使用GNOME终端仿真器</li><li>使用Kconsole终端仿真器</li><li>使用xterm终端仿真器</li></ul></li></ul><p>配置终端颜色：</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">setterm -inversecreen on|off     # 颜色反转</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">setterm -background red | [color]  # 设置背景颜色</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">setterm -foreground red | [color]  # 设置前景颜色</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">setterm -reset  # 将终端外观恢复成默认设置并清屏</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">setterm -store  # 将终端当前的前景色和背景色设置成-reset选项的值</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="第三章-基本的-bash-shell-命令"></a>第三章 基本的 <code>Bash Shell</code> 命令<a aria-hidden="true" tabindex="-1" class="hash-link" href="#第三章-基本的-bash-shell-命令" title="Direct link to heading">#</a></h2><ul><li>使用shell</li><li>bash手册</li><li>浏览文件系统</li><li>文件和目录列表</li><li>管理文件和目录</li><li>查看文件内容</li></ul><p>shell启动时依赖用户账户配置， <code>/etc/passwd</code></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/etc/passwd  # 文件包含了所有系统账户用户列表，及用户的基本配置 </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">leoy:x:1000:1000:LeoY,,,:/home/leoy:/bin/bash</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 结果每个字段用：冒号分割</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 当前只关注最后一个字段，指定用户使用的shell程序</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 即leoy用户将使用bash shell</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><p>shell提示符: <code>$</code> , 表示进入到shell了</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">leoy@server233:~$  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 因为shell有可能是通过ssh登录的，所以需要一些额外的信息，如</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># leoy表示当前用户ID</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># server233表示当前主机名，有时也显示为ip地址</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><p>bash 参考手册 <code>man</code>  <code>info</code>
另外大多数命令都可以接受 <code>-help</code> 或 <code>--help</code> 、 <code>-h</code> 选项
浏览文件系统: 许多Linux发行版都遵循FHS（文件系统层级标准filesystem hierachy standard），这样以来就可以在任何兼容FHS的linux中轻易的查找文件 </p><ul><li><a href="http://www.pathname.com/fhs%E3%80%82" target="_blank" rel="noopener noreferrer">FHS官网</a></li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/ 虚拟目录的根目录。通常不会在这里存储文件</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/bin 二进制目录，存放许多用户级的GNU工具</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/boot 启动目录，存放启动文件</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/dev 设备目录，Linux在这里创建设备节点</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/etc 系统配置文件目录</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/home 主目录，Linux在这里创建用户目录</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/lib 库目录，存放系统和应用程序的库文件</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/media 媒体目录，可移动媒体设备的常用挂载点</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/mnt 挂载目录，另一个可移动媒体设备的常用挂载点</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/opt 可选目录，常用于存放第三方软件包和数据文件</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/proc 进程目录，存放现有硬件及当前进程的相关信息</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/root root用户的主目录</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/sbin 系统二进制目录，存放许多GNU管理员级工具</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/run 运行目录，存放系统运作时的运行时数据</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/srv 服务目录，存放本地服务的相关文件</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/sys 系统目录，存放系统硬件信息的相关文件</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/tmp 临时目录，可以在该目录中创建和删除临时工作文件</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/usr 用户二进制目录，大量用户级的GNU工具和数据文件都存储在这里</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/var 可变目录，用以存放经常变化的文件，比如日志文件</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">cd          # 切换路径</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">.           # 当前目录</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">..          # 父级目录</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pwd         # 显示当前路径</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            # -P 显示SoftLink路径的源文件路径</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ls </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-F          # 带颜色 &amp; 区分路径和文件</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-a          # 显示隐藏文件</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-R          # 递归显示路径下所有文件，不常用</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-l          # 列表显示更多文件信息</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ll          # 一般 ll 等价于 ls -alF</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">通配符 ？匹配一个字符 *匹配另个或者多个字符</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ls -l my?script.*</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">touch                     # 创建文件</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cp -i [from] [to]         # 复制文件 可以是相对路径也可以是绝对路径</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          # -i 强制询问是否覆盖文件，默认不会询问自动覆盖</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">mv [from] [to]            # 移动和重命名文件，不会改变inode和时间戳</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">rm -i                     # -i 删除确认</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          # -r 递归删除</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          # -f 强制删除</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><blockquote><p>rm -rf命令既没有警告信息，也没有声音提示。这肯定是一个危险的工具，尤其是在拥有</p></blockquote><p>超级用户权限的时候。务必谨慎使用，请再三检查你所要进行的操作是否符合预期。</p><p>链接文件</p><ul><li>符号链接（软链接） <code>soft link</code> (它们的内容并不相同，是两个完全不同的文件，只是通过符号指向了一起)</li><li>硬链接 <code>hard link</code> （硬链接的文件根本是同一份文件，即使硬链接会创建独立的虚拟文件，其中包含了原始文件的信息和位置）</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ln  -s file fileSoftLink    # -s 软链接，创建file的符号链接文件fileSoftLink,fileSoftLink事先不能存在</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ln  file fileHardLink       # 硬链接，</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><p>若fileA, fileB, fileC分别是：B是A的softlink，C是A的hardLink, 那么不管修改A, B, C任一一个文件，其他文件内容都会一起更新，但是当删除源文件A时，B也随之被删除，而C仍可以正常使用。</p><blockquote><p>注意！！源文件的路径和目标文件的路径一定都用 完整路径，不能用相对路径</p></blockquote><p>其他参考： </p><ul><li><a href="https://www.ostechnix.com/explaining-soft-link-and-hard-link-in-linux-with-examples/" target="_blank" rel="noopener noreferrer">So, what is the difference between Hard link and the normal copied file?</a></li><li>自己在terminal中实验</li></ul><p>处理目录：</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">mkdir -P /LY/xx/1a2b          # -P自动创建路径中不存在的文件夹</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">rmdir                         # 只能删除空路径</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><p>查看文件内容： <code>file</code>  <code>cat</code>  <code>more</code>  <code>less</code>  <code>tail</code>  <code>head</code>  <code>nano</code>  <code>vi</code>  <code>vim</code>
我推荐： <code>cat</code>  <code>vim</code></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="第四章-更多的-bash-命令"></a>第四章 更多的 <code>Bash</code> 命令<a aria-hidden="true" tabindex="-1" class="hash-link" href="#第四章-更多的-bash-命令" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="41-检测程序"></a>4.1 检测程序<a aria-hidden="true" tabindex="-1" class="hash-link" href="#41-检测程序" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ps          # 查看进程，默认只显示当前用户当前控制台下的进程，默认没什么卵用</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            # -A 显示所有进程</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            # -N 显示与指定参数不符的所有进程</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            # -a 显示除控制进程（session leader①）和无终端进程外的所有进程</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            # -d 显示除控制进程外的所有进程</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            # -e 显示所有进程</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            # -p pidlist 显示PID在pidlist列表中的进程</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            # -C cmdlist 显示包含在cmdlist列表中的进程</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            # -G grplist 显示组ID在grplist列表中的进程</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            # -g grplist 显示会话或组ID在grplist列表中的进程②</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            # -U userlist 显示属主的用户ID在userlist列表中的进程</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 显示结果解析：</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">UID：启动这些进程的用户。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">PID：进程的进程ID。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">PPID：父进程的进程号（如果该进程是由另一个进程启动的）。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">C：进程生命周期中的CPU利用率。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">STIME：进程启动时的系统时间。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">TTY：进程启动时的终端设备。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">TIME：运行进程需要的累计CPU时间。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">CMD：启动的程序名称。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">top         # 和ps命令类似，不过是实时的进程状态</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kill        # 通过PID结束进程</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">1 HUP 挂起</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">2 INT 中断</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">3 QUIT 结束运行</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">9 KILL 无条件终止</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">11 SEGV 段错误</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">15 TERM 尽可能终止</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">17 STOP 无条件停止运行，但不终止</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">18 TSTP 停止或暂停，但继续在后台运行</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">19 CONT 在STOP或TSTP之后恢复执行</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kill -9 [pid]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kill -s KILL [pid]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">killall [name]    # 通过进程名结束进程</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">killall http*   # 结束了所有以http开头的进程</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="42-检测磁盘空间"></a>4.2 检测磁盘空间<a aria-hidden="true" tabindex="-1" class="hash-link" href="#42-检测磁盘空间" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">mount           # 输出当前系统上挂载的设备列表</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">df -h           # 查看所有已挂载磁盘的使用情况</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                # -h格式化单位,自动按易读的形式，M和G显示兆字节和吉字节</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">du              # 显示某个特定目录（默认情况下是当前目录）的磁盘使用情况  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                # 可用来快速判断系统上某个目录下是不是有超大文件              # -h 格式化单位 -s 显示每个输出的总计 -c 显示已列出的文件的总大小</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="43-处理数据文件"></a>4.3 处理数据文件<a aria-hidden="true" tabindex="-1" class="hash-link" href="#43-处理数据文件" title="Direct link to heading">#</a></h3><p>排序数据</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">sort file -n</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-M</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><p>搜索数据</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">grep [x] file # 在file中搜索x</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              # -v 反向搜索</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><p>压缩数据</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">gzip</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">gzcat</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">gunzip</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><p>打包数据</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-python codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">tar</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">archive </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 存档文件 | 打包文件</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">&quot;&quot;&quot; 示例 &quot;&quot;&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">tar </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">cf archive</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">tar foo bar  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 将foo和bar打包并创建打包文件archive.tar</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">tar </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">tvf archive</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">tar        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 列出打包文件archive.tar中的所有文件，并详细输出（-v）</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">tar </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">xf archive</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">tar          </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 提取打包文件archive.tar中所有文件</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">&quot;&quot;&quot; 略的部分，参考tar --help &quot;&quot;&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">&quot;&quot;&quot; 本地文件选择 Local file name selection &quot;&quot;&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">略</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">C</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">T</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">X</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">&quot;&quot;&quot; 文件名匹配参数  File name matching options &quot;&quot;&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">略</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">&quot;&quot;&quot; 主要的操作模式 Main operation mode&quot;&quot;&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">A</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">catenate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">concatenate  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 将一个打包文件新增到另一个打包的末尾，新增的打包文件格式必须一致，否则结果是一个GUN不支持的tar格式</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 压缩后的打包文件不能进行该操作</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 参数：新增文件名</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">create    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 新建一个打包文件，参数为路径名会递归进行（除非指定--no-recursion）</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 参数 打包输出的文件名</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">d</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">diff</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">compare</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 比较两个文件的差异</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 参数：进行比较的文件名（支持&gt;2个），无参数空默认比较当前路径下的所有文件</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">delete</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 从打包文件中删除指定文件</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 压缩后的打包文件不能进行该操作</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 参数：至少指定一个文件名</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">r</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">append</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 增加文件到一个打包文件末尾中 </span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">t</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token builtin" style="color:rgb(130, 170, 255)">list</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 列出打包文件中的所有文件</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">test</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">label </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># test the archive volume label and exit</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">u</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">update               </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># only append files newer than copy in archive</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">extract</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">get       </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 提取出打包文件中的所有文件</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">&quot;&quot;&quot; Operation modifiers &quot;&quot;&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">略</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">&quot;&quot;&quot; Overwrite control &quot;&quot;&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">略</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">&quot;&quot;&quot; Select output stream &quot;&quot;&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">略</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">&quot;&quot;&quot; Handling of file attributes &quot;&quot;&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">略</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">&quot;&quot;&quot;  Handling of extended file attributes &quot;&quot;&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">略</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">&quot;&quot;&quot;  Device selection and switching &quot;&quot;&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">f</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token builtin" style="color:rgb(130, 170, 255)">file</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">ARCHIVE        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 指定进行操作的文件 use archive file ordevice ARCHIVE</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">force</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">local          </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 强制使用本地文件</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">F</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">info</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">script</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">NAME</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">new</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">volume</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">script</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">NAME</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                           run script at end ofeach tape </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">implies </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">M</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">L</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">tape</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">length</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">NUMBER   change tape after writing NUMBER x </span><span class="token number" style="color:rgb(247, 140, 108)">1024</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">bytes</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">M</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">multi</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">volume         create</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token builtin" style="color:rgb(130, 170, 255)">list</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">extractmulti</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">volume archive</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">rmt</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">command</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">COMMAND  use given rmt COMMANDinstead of rmt</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">rsh</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">command</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">COMMAND  use remote COMMANDinstead of rsh</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">volno</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token builtin" style="color:rgb(130, 170, 255)">file</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">FILE      use</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">update the volume number </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> FILE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">&quot;&quot;&quot; Device blocking &quot;&quot;&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">略</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">&quot;&quot;&quot; 打包文件格式 Archive format selection &quot;&quot;&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">略</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">&quot;&quot;&quot; 压缩参数 Compression options &quot;&quot;&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">auto</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">compress </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 根据打包文件的后缀自动判断压缩类型</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">j</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">bzip2 </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># bzip2类型</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">J</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">xz                   </span><span class="token builtin" style="color:rgb(130, 170, 255)">filter</span><span class="token plain"> the archive through xz</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">lzip                 </span><span class="token builtin" style="color:rgb(130, 170, 255)">filter</span><span class="token plain"> the archive through lzip</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">lzma                 </span><span class="token builtin" style="color:rgb(130, 170, 255)">filter</span><span class="token plain"> the archive through xz</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">lzop                 </span><span class="token builtin" style="color:rgb(130, 170, 255)">filter</span><span class="token plain"> the archive through lzop</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">no</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">auto</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">compress     do </span><span class="token keyword" style="font-style:italic">not</span><span class="token plain"> use archive suffix to determine the compression program</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">z</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">gzip</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">gunzip</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">ungzip   </span><span class="token builtin" style="color:rgb(130, 170, 255)">filter</span><span class="token plain"> the archive through gzip</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">zstd                 </span><span class="token builtin" style="color:rgb(130, 170, 255)">filter</span><span class="token plain"> the archive through zstd</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">Z</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">compress</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">uncompress   </span><span class="token builtin" style="color:rgb(130, 170, 255)">filter</span><span class="token plain"> the archive through compress</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="第5章-理解shell"></a>第5章 理解shell<a aria-hidden="true" tabindex="-1" class="hash-link" href="#第5章-理解shell" title="Direct link to heading">#</a></h2><p>5.1 shell的类型
ubuntu默认的系统shell为 <code>dash shell（Debian Almquist shell）</code></p><blockquote><p>dash is a POSIX-compliant implementation of /bin/sh that aims to be as small as possible. </p></blockquote><p>参考</p><ul><li><a href="https://www.cyberciti.biz/faq/debian-ubuntu-linux-binbash-vs-bindash-vs-binshshell/" target="_blank" rel="noopener noreferrer">Linux: What is Dash ( /bin/dash ) Shell?</a></li></ul><p>用户shell为bash shell</p><p>5.2 shell的父子关系
在shell中使用其他shell程序</p><p>查看进程的关系（嵌套结构）：</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ps --forest</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ps -f           # 通过pid的关系分析出嵌套关系</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><p>进程列表</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">sleep  300&amp;     # 使进程等待（暂停、睡眠）的时间，单位是秒(s)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                # &amp;表示将进程加入后台执行</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">jobs            # 显示后台作业信息</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">coproc          # 协程</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><p><code>后台作业</code> 和 <code>协程</code> 的实现原理基本都是新开一个子shell并将任务在子shell中执行，而不会阻塞当前的 <code>terminal</code> 。</p><p>5.3 理解shell内建命令
内建命令（build-in）和外建命令, 两者的操作方式大不相同。</p><p><code>whitch</code> 和 <code>type</code> 来查看是否是内建命令（主要还是用 <code>type</code> , <code>which</code> 只显示外部命令文件）</p><p><strong>外部命令</strong>
外部命令是存在于 <code>shell</code> 之外的 <code>程序</code> , 它并不是shell程序的一部分，外部命令通常位于 <code>/bin</code> , <code>/usr/bin</code> , <code>/sbin</code> , 或 <code>/usr/bin</code> 中。</p><p>当外部命令执行时候，会创建一个子进程，这个操作被称为衍生(forking)。</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 外部命令ps很方便显示出它的父进程以及自己所对应的衍生子进程</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ ps -f</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">UID        PID  PPID  C STIME TTY          TIME CMD</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">leoy      4540  2652  0 09:35 pts/3    00:00:00 bash</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">leoy      4557  4540  0 09:35 pts/3    00:00:00 ps -f</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><blockquote><p>当进程必须执行衍生操作时，它需要花费时间和精力来设置新子进程的环境。所以说，外部</p></blockquote><p>命令多少还是有代价的。</p><blockquote><p>就算衍生出子进程或是创建了子shell，你仍然可以通过发送信号与其沟通，这一点无论是</p></blockquote><p>在命令行还是在脚本编写中都是极其有用的。发送信号（signaling）使得进程间可以通过
信号进行通信。信号及其发送会在第16章中讲到。</p><p><strong>内建命令</strong>
内建命令已经和shell编译成了一体，作为shell工具的组成部分存在。不需要借助外部程序文件来运行（不使用子进程执行，直接执行）。</p><p>常见内建命令</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">cd </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exit </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">history </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">alias -p            # 列出可用别名</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">alias li=&#x27;ls -li&#x27;   # 创建别名</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><p>有些命令有多种实现，如 <code>echo</code> 既有内建命令，又有外部命令，使用 <code>type -a</code> 查询</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ type -a echo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">echo is a shell builtin</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">echo is /bin/echo</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="第六章-使用linux环境变量"></a>第六章 使用Linux环境变量<a aria-hidden="true" tabindex="-1" class="hash-link" href="#第六章-使用linux环境变量" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="61-什么是环境变量"></a>6.1 什么是环境变量<a aria-hidden="true" tabindex="-1" class="hash-link" href="#61-什么是环境变量" title="Direct link to heading">#</a></h3><p>environment variable</p><p>bash shell使用环境变量来存储有关shell会话和工作环境的信息。 <code>环境变量</code> 允许你在内存中存储数据，以便程序和shell脚本轻松的访问使用。</p><p>环境变量分为两类：</p><ul><li>全局变量</li><li>局部变量</li></ul><p><strong>全局环境变量</strong></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 查看所有环境变量</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">env</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">printenv </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 查看某个环境变量的值</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">printenv HOME</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">echo $HOME</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 使用环境变量的值 $ENV_NAME</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cd $HOME</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 全局环境变量可用于进程的所有子shell</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><p><strong>局部环境变量</strong>
linux中并没有只显示局部环境变量的命令。
<code>set</code> 命令会显示当前进程的局部变量、全局变量和用户自定义变量</p><p><strong>设置局部环境变量</strong>:shell启动后就可以通过=赋值创建局部变量，值可以是数值或是字符串。</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ echo $leo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ leo=233abc            # 注意赋值=中间不能有空格</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        # 不然会将空格后面当作下一条命令执行</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        # 值中间有空格需要用引号包起来“233 1213”， ‘123 abc’</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ echo $leo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">233abc</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><blockquote><p>bash shell所有的环境变量名均使用大写字母。自己创建的局</p></blockquote><p>部变量或是shell脚本使用小写字母。由于变量名区分大小写。用户定义的局部变量
时使用小写字母能够尽可能避免与系统环境变量的冲突。</p><blockquote><p>在子进程中设置了一个局部变量，那么一旦你退出了子进程，那个局部环境</p></blockquote><p>变量就不可用</p><p><strong>设置全局环境变量</strong>：先创建一个局部变量，在用 <code>export</code> 设为全局的</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ leo=233abc</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ export leo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 现在leo变量可以在当前shell的任何子shell中访问（因为是全局变量了）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 不过export只在当前shell进程中有效，关闭后或是打开另一个shell不能访问到刚刚设置的leo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 在子shell中再次重新定义leo，只会影响到当前环境的leo值，并不会修改父shell的leo，export也只能影响到子shell的子shell</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><p><strong>删除环境变量</strong></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ leo=233abc</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ export leo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ unset leo                 # 删除leo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 和修改变量一样，在子shell中删除全局变量后，你无法将效果反映到父shell中，只会影响子shell及它的子shell</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><p><strong>bash自带的环境变量</strong>
略</p><p><strong>设置 <code>PATH</code> 环境变量</strong>
当你在shell命令行界面中输入一个外部命令时（参见第5章），shell必须搜索系统来找到对应
的程序。
<strong>PATH环境变量定义了用于进行命令和程序查找的目录</strong>
<strong>如果命令或者程序的位置没有包括在PATH变量中，那么如果不使用绝对路径的话，shell是没
法找到的</strong></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ myprog </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-bash: myprog: command not found</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ echo $PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ PATH=$PATH:/LY</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 对PATH变量的修改只能持续到本次的进程结束，退出terminal或重启系统都会使得修改失效</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><p><strong>如何让修改的环境变量持久化？-系统环境变量修改</strong></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 启动shell时候会从5个位置读取配置（包括环境变量）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/etc/profile</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$HOME/.bash_profile</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$HOME/.bashrc               </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$HOME/.bash_login</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$HOME/.profile</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 环境变量持久化：</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 最好是在/etc/profile.d目录中创建一个以.sh结尾的文件。把所有新的或修改过的全局环境变量设置放在这个文件中</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 在大多数发行版中，存储个人用户永久性bash shell变量的地方是$HOME/.bashrc文件。这一点适用于所有类型的shell进程（并且注意BASH_ENV变量的指向）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">可以把自己的alias设置放在</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># $HOME/.bashrc启动文件中，使其效果永久化</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><p><strong>数组环境变量</strong></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 要给某个环境变量设置多个值，可以把值放在括号里，值与值之间用空格分隔</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ mytest=(one two three four five)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ echo ${mytest[2]} // three</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ echo ${mytest[*]} // *号表示取所有 one two three four five</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 改变某个变量的值</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ mytest[2]=seven</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 删除数组某个值</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ unset mytest[2]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 删除整个数组</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ unset mytest</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="第七章-理解linux文件权限"></a>第七章 理解Linux文件权限<a aria-hidden="true" tabindex="-1" class="hash-link" href="#第七章-理解linux文件权限" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="71-使用-linux-用户"></a>7.1 使用 <code>Linux</code> 用户<a aria-hidden="true" tabindex="-1" class="hash-link" href="#71-使用-linux-用户" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/etc/passwd  # Linux该文件将用户的登录名匹配到对应的UID值</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><p>Linux系统会为各种各样的功能创建不同的用户账户，而这些账户并不是真的用户。这些账户叫作系统账户，是系统上运行的各种服务进程访问资源用的特殊账户。所有运行在后台的服务都需要用一个系统用户账户登录到Linux系统上。</p><blockquote><p>在安全成为一个大问题之前，这些服务经常会用root账户登录。遗憾的是，如果有非授权的</p></blockquote><p>用户攻陷了这些服务中的一个，他立刻就能作为root用户进入系统。为了防止发生这种情况，现
在运行在Linux服务器后台的几乎所有的服务都是用自己的账户登录。这样的话，即使有人攻入
了某个服务，也无法访问整个系统。</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 现在，绝大多数Linux系统都将用户密码保存在另一个单独的文件中</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 只有特定的程序（比如登录程序）才能访问这个文件</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/etc/shadow</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># /etc/shadow文件对Linux系统密码管理提供了更多的控制。只有root用户才能访问/etc/shadow</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">文件，这让它比起/etc/passwd安全许多。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">leo:$1$KlwZG6L.$/x6yVfmKpyXaxPe0VAr11/:18201:0:99999:7:::</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 9个字段按:分隔，分别代表：</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 与/etc/passwd文件中的登录名字段对应的登录名</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 加密后的密码</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 自上次修改密码后过去的天数密码（自1970年1月1日开始计算）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 多少天后才能更改密码</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 多少天后必须更改密码</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 密码过期前提前多少天提醒用户更改密码</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 密码过期后多少天禁用用户账户</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 用户账户被禁用的日期（用自1970年1月1日到当天的天数表示）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 预留字段给将来使用</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><p><strong>添加新用户</strong></p><ul><li><code>useradd</code> 默认值查看和修改</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">useradd -D # 查看添加用户的默认值</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           # 系统默认值被设置在/etc/default/useradd文件</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           # 快速修改配置</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-b default_home 更改默认的创建用户HOME目录的位置</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-e expiration_date 更改默认的新账户的过期日期</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-f inactive 更改默认的新用户从密码过期到账户被禁用的天数</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-g group 更改默认的组名称或GID </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-s shell 更改默认的登录shell </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">useradd -D -s /bin/bash     # 将默认shell改为bash</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><ul><li><code>useradd</code> 创建用户</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">useradd -m test         # 创建一个test用户，并创建HOME目录</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-s shell 指定默认的登录shell </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-m 创建用户的HOME目录</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-c comment 给新用户添加备注</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-d home_dir 为主目录指定一个名字（如果不想用登录名作为主目录名的话）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-e expire_date 用YYYY-MM-DD格式指定一个账户过期的日期</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-f inactive_days 指定这个账户密码过期后多少天这个账户被禁用；0表示密码一过期就立即禁用，1表示</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">禁用这个功能</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-g initial_group 指定用户登录组的GID或组名</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-G group ... 指定用户除登录组之外所属的一个或多个附加组</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-k 必须和-m一起使用，将/etc/skel目录的内容复制到用户的HOME目录</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-M 不创建用户的HOME目录（当默认设置里要求创建时才使用这个选项）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-n 创建一个与用户登录名同名的新组</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-r 创建系统账户</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-p passwd 为用户账户指定默认密码</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-u uid 为账户指定唯一的UID</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><ul><li><code>userdel</code> 删除用户</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">-r          # 同时删除用户HOME目录及邮件目录等</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><ul><li><code>usermod</code> 修改用户<ul><li><code>usermod</code> 合集</li></ul></li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">-l # 修改用户账户的登录名</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-p # 修改账户的密码   </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">usermod -p `openssl passwd` (USERNAME)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sudo passwd leoy</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pwd: leoy</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-c # 修改备注字段</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-e # 修改过期日期</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-g # 修改默认的登录组</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-L # 锁定账户，使用户无法登录 </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-U # 解除锁定，使用户能够登录</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   # -L选项尤其实用。它可以将账户锁定，使用户无法登录，同时无需删除账户和用户的数据。要让账户恢复正常，只要用-U选项就行了</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><ul><li>其他<ul><li><code>passwd</code> 修改密码 <code>chpasswd</code> 批量修改密码</li><li><code>chsh</code> 修改用户 <code>shell</code></li><li><code>chfn</code> 修改用户账户的备注信息</li><li><code>chage</code> 修改密码的过期时间</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="72-使用linux组-group-"></a>7.2 使用Linux组( <code>group</code> )<a aria-hidden="true" tabindex="-1" class="hash-link" href="#72-使用linux组-group-" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/etc/group</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">leo:x:1000:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 千万不能通过直接修改/etc/group文件来添加用户到一个组，要用usermod命令（在7.1节中介绍过）。在添加用户到不同的组之前，首先得创建组。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 用户账户列表某种意义上有些误导人。你会发现，在列表中，有些组并没有列出用户。这是说这些组没有成员。当一个用户在/etc/passwd文件中指定某个组作为默认组时，用户账户不会作为该组成员再出现在/etc/group文件中。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 组名</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 组密码</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> GID</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 属于该组的用户列表</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><ul><li><code>groupadd</code> 创建新组</li><li><code>groupmod</code> 修改组</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="73-文件权限"></a>7.3 文件权限<a aria-hidden="true" tabindex="-1" class="hash-link" href="#73-文件权限" title="Direct link to heading">#</a></h3><ul><li><code>ll | ls -al</code> 查看文件权限</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">dr-xr-xr-x. 19 root root  4096 12月 11 14:09 ./</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">dr-xr-xr-x. 19 root root  4096 12月 11 14:09 ../</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">lrwxrwxrwx.  1 root root     7 8月   8 2018 bin -&gt; usr/bin/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">dr-xr-xr-x.  5 root root  4096 11月 22 10:58 boot/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">drwxr-xr-x   2 root root  4096 1月  21 2019 data/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">drwxr-xr-x  19 root root  3000 10月 31 12:35 dev/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">drwxr-xr-x. 93 root root 12288 12月 11 13:18 etc/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">drwxr-xr-x.  3 root root  4096 11月  1 11:37 home/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">lrwxrwxrwx.  1 root root     7 8月   8 2018 lib -&gt; usr/lib/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">lrwxrwxrwx.  1 root root     9 8月   8 2018 lib64 -&gt; usr/lib64/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">drwx------.  2 root root 16384 8月   8 2018 lost+found/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 第一个字符</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -代表文件</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> d代表目录</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> l代表链接</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> c代表字符型设备</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> b代表块设备</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> n代表网络设备</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 3组三字符的编码。每一组定义了3种访问权限</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> r代表对象是可读的</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> w代表对象是可写的</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> x代表对象是可执行的</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 若没有某种权限，在该权限位会出现单破折线。这3组权限分别对应对象的3个安全级别：</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 对象的属主</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 对象的属组</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 系统其他用户</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><ul><li><code>umask</code> 默认文件权限</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 权限码-八进制值 </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">--- 000 0 没有任何权限</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">--x 001 1 只有执行权限</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-w- 010 2 只有写入权限</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-wx 011 3 有写入和执行权限</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">r-- 100 4 只有读取权限</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">r-x 101 5 有读取和执行权限</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">rw- 110 6 有读取和写入权限</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">rwx 111 7 有全部权限</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">666     # 文件全权限（所有用户可读可写）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">777     # 目录全权限 (所有用户可读可写可执行，目录需要可执行权限x才可访问)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># umask 权限掩码，一般为022</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 默认文件权限666，创建时减去umask得644，即默认权限为644(rw-r--r)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 同理推导路径默认权限755(rwxr-xr-x)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 在大多数Linux发行版中，umask值通常会设置在/etc/profile启动文件中</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># ubuntu设置在/etc/login.defs文件中</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><ul><li><code>chmod</code> 修改权限</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">chmod [options] mode file</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># options</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-R # 权限的改变递归地作用到文件和子目录</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 八进制mode</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">chmod 760 newfile </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">chmod 777 newfile </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">chmod -R 777 files/ # 给files及其子目录赋予全权限</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 符号mode</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> u代表用户</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> g代表组</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> o代表其他</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> a代表上述所有</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">chmod u+r file  # 给用户添加对file文件的读权限r</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">chmod u-r file  # 减少权限</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">chmod u=rwx file  # 直接赋值替换</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><ul><li><code>chown</code> 修改文件owener和group</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">chown newown file</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">chown newown.newgroup file</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">chown .newgroup file</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">chown newown. file      # 当owner名和group名一样时的快捷设置方式，同时改变own和group</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><ul><li><code>chgrp</code> 修改文件group</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">chgrp newgroup file</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><p><strong>创建共享目录</strong></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">mkdir sharedir </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">chgrp shared sharedir  # shared为共享的group</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">chmod g+s testdir      # 将目录的SGID位置位保证目录中新建文件都用shared作为默认属组</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">umask 002              # 所有组成员都需把他们的umask值设置成文件对属组成员可写</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">touch testfile         # 现在新创建的文件，shared组的所有成员都可以访问了</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="第八章-管理文件系统"></a>第八章 管理文件系统<a aria-hidden="true" tabindex="-1" class="hash-link" href="#第八章-管理文件系统" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="81-linux文件系统"></a>8.1 Linux文件系统<a aria-hidden="true" tabindex="-1" class="hash-link" href="#81-linux文件系统" title="Direct link to heading">#</a></h3><p><strong>基本的文件系统</strong>
extended filesystem简称ex，为linux提供了一个基本的类unix文件系统：使用虚拟目录来操作硬件设备，在物理设备上定长的块来存储数据。</p><ul><li>ext文件系统</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ext文件系统采用名为索引节点(nodes)的系统来存放虚拟目录中所存储文件的信息。索引节点系统</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">在每个物理设备中创建一个单独的表（称为索引节点表）来存储这些文件的信息。存储在虚拟目</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">录中的每一个文件在索引节点表中都有一个条目。ext文件系统名称中的extended部分来自其跟踪</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">的每个文件的额外数据，包括：</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 文件名</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 文件大小</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 文件的属主</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 文件的属组</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 文件的访问权限</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 指向存有文件数据的每个硬盘块的指针</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><ul><li>ext2文件系统</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">最早的ext文件系统有不少限制，比如文件大小不得超过2 GB</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">在Linux出现后不久，ext文件系统就升级到了第二代扩展文件系统，叫作ext2。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ext2文件系统是ext文件系统基本功能的一个扩展，但保持了同样的结构。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ext2文件系统扩展了索引节点表的格式来保存系统上每个文件的更多信息</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">* ext2的索引节点表为文件添加了创建时间值、修改时间值和最后访问时间值来帮助系统管理员追踪文件的访问情况</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><p><strong>日志文件系统</strong>
Linux有三种广泛使用的日志方法
|方法 | 描述 |
| - | - |
| 数据模式  |  索引节点和文件都会被写入日志，丢失数据风险低，但性能差 |
| 有序模式  | 只有索引节点被写入日志，只有在文件数据成功写入时被删除，在性能和安全性之间取得良好的折中|
| 回写模式 | 只有索引节点被写入日志，不控制文件数据何时写入，丢失文件的风险高，但仍比不使用日志好 |</p><ul><li>ext3</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">2001年，ext3文件系统被引入Linux内核中</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">它采用和ext2文件系统相同的索引节点表结构，但给每个存储设备增加了一个日志文件，以将准备写入存储设备的数据先记入日志。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">默认情况下，ext3文件系统用有序模式的日志功能</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">虽然ext3文件系统为Linux文件系统添加了基本的日志功能，但它仍然缺少一些功能。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">例如ext3文件系统无法恢复误删的文件，它没有任何内建的数据压缩功能（虽然有个需单独安装的补丁支持这个功能）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ext3文件系统也不支持加密文件</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><ul><li>ext4</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ext4文件系统在2008年受到Linux内核官方支持</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">现在已是大多数流行的Linux发行版采用的默认文件系统，比如Ubuntu。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">除了支持数据压缩和加密，ext4文件系统还支持一个称作区段（extent）的特性。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">区段在存储设备上按块分配空间，但在索引节点表中只保存起始块的位置</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">由于无需列出所有用来存储文件中数据的数据块，它可以在索引节点表中节省一些空间。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ext4还引入了块预分配技术（block preallocation）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">如果你想在存储设备上给一个你知道要变大的文件预留空间，</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ext4文件系统可以为文件分配所有需要用到的块，而不仅仅是那些现在已经用到的块。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ext4文件系统用0填满预留的数据块，不会将它们分配给其他文件</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><ul><li>其他日志文件系统</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Reiser文件系统</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">JFS文件系统</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">XFS文件系统</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><p><strong>写时复制文件系统</strong>
copy-on-write COW，日志文件系统的另一种模式</p><p>COW利用快照兼顾了安全性和性能。如果要修改数据，会使用克隆或可写快照。修改过的数据并不会直接覆盖当前数据，而是被放入文件系统中的另一个位置上。即便是数据修改已经完成，之前的旧数据也不会被重写。
COW文件系统日渐流行</p><ul><li>ZFS文件系统</li><li>Btrf文件系统</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">也称为B树文件系统</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Oracle 2007</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">OpenSUSE Linux发行版最近将Btrfs作为其默认文件系统。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">除此之外，该文件系统也出现在了其他Linux发行版中（如RHEL）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">不过并不是作为默认文件系统</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="82-操作文件系统"></a>8.2 操作文件系统<a aria-hidden="true" tabindex="-1" class="hash-link" href="#82-操作文件系统" title="Direct link to heading">#</a></h3><p><strong>创建分区</strong>
<strong>创建文件系统</strong>
<strong>文件系统检查与修复</strong></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="83-逻辑卷管理"></a>8.3 逻辑卷管理<a aria-hidden="true" tabindex="-1" class="hash-link" href="#83-逻辑卷管理" title="Direct link to heading">#</a></h3><p><strong>逻辑卷管理布局</strong>
<strong>Linux中的lvm</strong></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="第九章-安装软件程序（包管理工具）"></a>第九章 安装软件程序（包管理工具）<a aria-hidden="true" tabindex="-1" class="hash-link" href="#第九章-安装软件程序（包管理工具）" title="Direct link to heading">#</a></h2><p>pakage management system PMS</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="91-包管理基础"></a>9.1 包管理基础<a aria-hidden="true" tabindex="-1" class="hash-link" href="#91-包管理基础" title="Direct link to heading">#</a></h3><ul><li>主要的两种PMS</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">dpkg  基于debain的发行版（Ubuntu、Linux Mint）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">rpm   基于Red Hat的发行版（Fedora、openSUSE、centos）</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><p>Debain系：
dpkg包含的工具：</p><ul><li>apt-get</li><li>apt-cache</li><li>aptitude</li></ul><p>x [depressiate] 到目前为止，最常用的命令行工具是aptitude，这是有原因的。aptitude工具本质上是apt工具和dpkg的前端。dpkg是软件包管理系统工具，而aptitude则是完整的软件包管理系统</p><p>从ubuntu 16开始提供了封装了常用 <code>apt-get</code> 和 <code>apt-cache</code> 的命令: <code>apt</code></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">sudo dpkg -i packageName.deb    # 从.deb源码安装</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sudo apt install name           # 从包管理器安装</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><ul><li><a href="https://help.ubuntu.com/lts/serverguide/apt.html" target="_blank" rel="noopener noreferrer">ubuntu apt docs</a></li></ul><p>apt基本使用</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">sudo apt install nmap       # 安装</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sudo apt install xx.dep     # 安装</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sudo apt remove nmap        # 卸载</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --purge remove      # 卸载并删除配置文件        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sudo apt update             # 从source.list更新可用的Pakage Index   </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sudo apt upgrade            # 升级已安装的pakage</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">apt help                    # 查看帮助文档</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">＃　其他（可用help查询）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">　list - list packages based on package names</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  search - search in package descriptions</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  show - show package details</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  install - install packages</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  remove - remove packages</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  autoremove - Remove automatically all unused packages</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  update - update list of available packages</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  upgrade - upgrade the system by installing/upgrading packages</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  full-upgrade - upgrade the system by removing/installing/upgrading packages</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  edit-sources - edit the source information file</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">＃　更底层的命令使用 apt-get 和 apt-cache</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">升级软件库                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 先update更新pakage index，再upgrade更新pakage</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">升级系统</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 需要先升级软件库</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#　do-release-upgrade　升级前先做好准备！慎重！</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">What is Pakage Index:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># The APT package index is essentially a database of available packages </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># from the repositories defined in the /etc/apt/sources.list file </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># and in the /etc/apt/sources.list.d directory.</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="第十章-编辑器使用"></a>第十章　编辑器使用<a aria-hidden="true" tabindex="-1" class="hash-link" href="#第十章-编辑器使用" title="Direct link to heading">#</a></h2><p>参考Linux目录下的vim使用</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="第十一章-构建基本脚本"></a>第十一章 构建基本脚本<a aria-hidden="true" tabindex="-1" class="hash-link" href="#第十一章-构建基本脚本" title="Direct link to heading">#</a></h2><p><strong>使用多个命令</strong></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ date ; who</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 多条命令按分号分隔</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><p><strong>创建shell脚本文件</strong></p><ul><li>文件第一行必须指定执行的shell，告诉shell使用那个shell来运行脚本</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">#!/bin/bash</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">date</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">who</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><ul><li>多条命令换行书写</li><li>执行脚本的用户需要拥有执行权限 <code>x</code></li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">-rwxr-xr-x   # 可以正常执行</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-rwxr--r--   # 组用户和其他用户无法执行</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">             # 只有owner可以执行</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><ul><li>要在任何地方执行需要将脚本所在目录加入 <code>PATH</code> ，或者放到 <code>PATH</code> 其中一个目录下（第6章所述，shell会通过PATH环境变量来查找命令）</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 将shell脚本文件所处的目录添加到PATH环境变量中；</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 在提示符中用绝对或相对文件路径来引用shell脚本文件。</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><ul><li>输出使用echo，支持不加引号、单引号、双引号</li><li>变量：环境变量、用户变量（临时赋值的变量）</li><li>引用命令的输出： 反引号和 <code>$()</code></li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">testing= `date`</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">testing=$(date)      # 将date的值赋值给testing</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 使用testing的值，即date的值</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">echo $testing           # 此时的输出和输入date的输出一致</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><ul><li>输出到文件</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">command &gt; outputfile</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">date &gt; test         # 将date的输出存储到test文件里面</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><ul><li>从文件输入</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">command &lt; inputfile</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">wc &lt; test         # wc命令可以对数据中的文本进行计数</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                  # wc 输出3个数字</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                  # 分别代表：文本的行数、词数、字节数</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                  # 该命令会对test文件的内容计数</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><ul><li>内联输入 <code>&lt;&lt;</code></li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 不从文件输入，而是指定输入的结尾，并直接从命令行输入作为输入</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">wx &lt;&lt; EOF        # 指定EOF为输入的结尾，回车开始输入</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                 # 输入结束后输入EOF作为输入的结尾</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ wc &lt;&lt; EOF</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; asdasds</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; asdasd</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; sad</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; asd</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; sa</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; d</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; sadsdsad  niaosdasijoijasd</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; EOF</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 7  8 55</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><ul><li>管道</li></ul><p>有时候需要将一个命令的输出作为另一个命令的输入，可以使用重定向来实现，虽然有点笨拙。</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 重定向的实现方式</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">dpkg -l &gt; dpkg.list     # 列出安装的dpkg包，并输出到dpkg.list文件中</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sort &lt; dpkg.list        # 将dpkg文件作为输入，传入sort进行排序</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 管道的实现方式</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 管道将前者命令的输出送入后面的命令</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">dpkg -l | sort | less   # 将dpkg包列出并sort，用less进行查看</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 管道操作是实时运行的 命令一输出数据，sort便会对其进行排序</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 再通过管道传给less命令来显示</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 最流行的用法是配合ls命令</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 当一个目录中文件夹特别多的时候，传到less或者more中进行查看</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ls -l | less</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ls -l | more</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><ul><li>数学运算</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">expr命令</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">方括号</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><ul><li>浮点数的解决方案</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">使用bc</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><ul><li>脚本的退出</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">查看退出状态码  $? 变量</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">date</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">echo $?         # 查看上一条命令date的退出状态码</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 退出状态码参考</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">0 命令成功结束</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">1 一般性未知错误</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">2 不适合的shell命令</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">126 命令不可执行</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">127 没找到命令</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">128 无效的退出参数</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">128+x 与Linux信号x相关的严重错误</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">130 通过Ctrl+C终止的命令</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">255 正常范围之外的退出状态码</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># exit退出命令</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 脚本中使用exit抛出结束状态码</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exit 5</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 在脚本中以状态码5退出</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 也可以使用变量</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 注意最大退出状态码是255</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="第十二章-使用结构化命令"></a>第十二章 使用结构化命令<a aria-hidden="true" tabindex="-1" class="hash-link" href="#第十二章-使用结构化命令" title="Direct link to heading">#</a></h2><p>bash shell的if语句会运行if后面的那个命令。如果该命令的退出状态码（参见第11章）是0（该命令成功运行），位于then部分的命令就会被执行
<strong>if-then语句: 即if(){ }</strong></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">即：</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">if(){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">if command1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">then</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    commands</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">fi</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">或者</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">if command1；then</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    commands</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">fi</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><p><strong>if-then-else语句</strong></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">即：</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">if(){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}else{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">if command1; then</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    commands</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">else</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    commands2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">fi</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><p><strong>嵌套if or better: elif</strong></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">if command1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">then</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    commands</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">elif command2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">then </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    commands2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">else</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    command3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">或者可读性更好的方式：</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">if command1; then</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    commands</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">elif command2; then </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    commands2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">elif command3; then </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    commands3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">else</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    commands4</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">fi</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><p><strong>test命令或者 [ ]方括号</strong>
果test命令中列出的条件成立，
test命令就会退出并返回退出状态码0。
这样if-then语句就与其他编程语言中的if-then语句
以类似的方式工作了。</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">if [ condition ] then </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> commands</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">fi</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><p><strong>数值比较</strong></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">n1 -eq n2 检查n1是否与n2相等</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">n1 -ge n2 检查n1是否大于或等于n2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">n1 -gt n2 检查n1是否大于n2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">n1 -le n2 检查n1是否小于或等于n2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">n1 -lt n2 检查n1是否小于n2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">n1 -ne n2 检查n1是否不等于n2</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><p><strong>字符串比较</strong></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">str1 = str2 检查str1是否和str2相同</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">str1 != str2 检查str1是否和str2不同</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">str1 &lt; str2 检查str1是否比str2小</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">str1 &gt; str2 检查str1是否比str2大</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-n str1 检查str1的长度是否非0 </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-z str1 检查str1的长度是否为0</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><p><strong>文件比较</strong>
检查目录、文件、空文件、是否可读、可写、可执行，所属关系，默认属组关系，文件日期</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">-d file 检查file是否存在并是一个目录</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-e file 检查file是否存在</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-f file 检查file是否存在并是一个文件</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-r file 检查file是否存在并可读</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-s file 检查file是否存在并非空</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-w file 检查file是否存在并可写</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-x file 检查file是否存在并可执行</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-O file 检查file是否存在并属当前用户所有</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-G file 检查file是否存在并且默认组与当前用户相同</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">file1 -nt file2 检查file1是否比file2新</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">file1 -ot file2 检查file1是否比file2旧</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><p><strong>复合条件测试</strong>
布尔逻辑： <code>&amp;&amp;</code>  <code>||</code>
<strong>if-then的高级特性</strong>
双括号、双方括号
双括号：</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">val++ 后增</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">val-- 后减</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">++val 先增</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">--val 先减</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">! 逻辑求反</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">~ 位求反</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">** 幂运算</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;&lt; 左位移</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt;&gt; 右位移</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&amp; 位布尔和</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| 位布尔或</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&amp;&amp; 逻辑和</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">|| 逻辑或</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><p><strong>case命令</strong></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="第十三章-更多的结构化命令"></a>第十三章 更多的结构化命令<a aria-hidden="true" tabindex="-1" class="hash-link" href="#第十三章-更多的结构化命令" title="Direct link to heading">#</a></h2><p><strong>for命令</strong></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">for var in list </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">do </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> commands </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">done</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></div><blockquote><p>从双方括号和case命令开始</p></blockquote></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#第一章-初始linux-shell" class="table-of-contents__link">第一章 初始Linux Shell</a></li><li><a href="#第二章-走进shell" class="table-of-contents__link">第二章 走进shell</a></li><li><a href="#第三章-基本的-bash-shell-命令" class="table-of-contents__link">第三章 基本的 <code>Bash Shell</code> 命令</a></li><li><a href="#第四章-更多的-bash-命令" class="table-of-contents__link">第四章 更多的 <code>Bash</code> 命令</a><ul><li><a href="#41-检测程序" class="table-of-contents__link">4.1 检测程序</a></li><li><a href="#42-检测磁盘空间" class="table-of-contents__link">4.2 检测磁盘空间</a></li><li><a href="#43-处理数据文件" class="table-of-contents__link">4.3 处理数据文件</a></li></ul></li><li><a href="#第5章-理解shell" class="table-of-contents__link">第5章 理解shell</a></li><li><a href="#第六章-使用linux环境变量" class="table-of-contents__link">第六章 使用Linux环境变量</a><ul><li><a href="#61-什么是环境变量" class="table-of-contents__link">6.1 什么是环境变量</a></li></ul></li><li><a href="#第七章-理解linux文件权限" class="table-of-contents__link">第七章 理解Linux文件权限</a><ul><li><a href="#71-使用-linux-用户" class="table-of-contents__link">7.1 使用 <code>Linux</code> 用户</a></li><li><a href="#72-使用linux组-group-" class="table-of-contents__link">7.2 使用Linux组( <code>group</code> )</a></li><li><a href="#73-文件权限" class="table-of-contents__link">7.3 文件权限</a></li></ul></li><li><a href="#第八章-管理文件系统" class="table-of-contents__link">第八章 管理文件系统</a><ul><li><a href="#81-linux文件系统" class="table-of-contents__link">8.1 Linux文件系统</a></li><li><a href="#82-操作文件系统" class="table-of-contents__link">8.2 操作文件系统</a></li><li><a href="#83-逻辑卷管理" class="table-of-contents__link">8.3 逻辑卷管理</a></li></ul></li><li><a href="#第九章-安装软件程序（包管理工具）" class="table-of-contents__link">第九章 安装软件程序（包管理工具）</a><ul><li><a href="#91-包管理基础" class="table-of-contents__link">9.1 包管理基础</a></li></ul></li><li><a href="#第十章-编辑器使用" class="table-of-contents__link">第十章　编辑器使用</a></li><li><a href="#第十一章-构建基本脚本" class="table-of-contents__link">第十一章 构建基本脚本</a></li><li><a href="#第十二章-使用结构化命令" class="table-of-contents__link">第十二章 使用结构化命令</a></li><li><a href="#第十三章-更多的结构化命令" class="table-of-contents__link">第十三章 更多的结构化命令</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="text--center"><div>Copyright © 2020 LeoY233. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.da09b0aa.js"></script>
<script src="/runtime~main.872dded8.js"></script>
<script src="/main.2f1d5848.js"></script>
<script src="/1.f45b894e.js"></script>
<script src="/2.a477ba05.js"></script>
<script src="/3.b78202e8.js"></script>
<script src="/1be78505.89b8407a.js"></script>
<script src="/171.d3ef19ea.js"></script>
<script src="/935f2afb.43a6fc9a.js"></script>
<script src="/17896441.30e2172e.js"></script>
<script src="/ca4bd4f8.685a2fb6.js"></script>
</body>
</html>