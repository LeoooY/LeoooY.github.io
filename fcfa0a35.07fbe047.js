(window.webpackJsonp=window.webpackJsonp||[]).push([[166],{221:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return b})),t.d(n,"metadata",(function(){return c})),t.d(n,"rightToc",(function(){return i})),t.d(n,"default",(function(){return l}));var r=t(2),a=t(6),o=(t(0),t(228)),b={},c={unversionedId:"DataBase/MongoDB/index",id:"DataBase/MongoDB/index",isDocsHomePage:!1,title:"index",description:"\u57fa\u672c\u64cd\u4f5c",source:"@site/docs/DataBase/MongoDB/index.md",slug:"/DataBase/MongoDB/index",permalink:"/docs/DataBase/MongoDB/index",version:"current"},i=[{value:"\u57fa\u672c\u64cd\u4f5c",id:"\u57fa\u672c\u64cd\u4f5c",children:[]},{value:"\u7528\u6237\u548c\u6743\u9650",id:"\u7528\u6237\u548c\u6743\u9650",children:[{value:"Mongo shell",id:"mongo-shell",children:[]}]}],d={rightToc:i};function l(e){var n=e.components,t=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},d,t,{components:n,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"\u57fa\u672c\u64cd\u4f5c"},"\u57fa\u672c\u64cd\u4f5c"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{}),"vim /etc/mongod.conf  // \u7f16\u8f91\u914d\u7f6e\u4fe1\u606f\n\n")),Object(o.b)("h2",{id:"\u7528\u6237\u548c\u6743\u9650"},"\u7528\u6237\u548c\u6743\u9650"),Object(o.b)("p",null,"\u53c2\u8003\uff1a\n",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://medium.com/mongoaudit/how-to-enable-authentication-on-mongodb-b9e8a924efac"}),"Enable auth on mongo")),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{}),"\u5185\u5efa\u7684\u89d2\u8272\n\n\u6570\u636e\u5e93\u7528\u6237\u89d2\u8272\uff1aread\u3001readWrite;\n\n\u6570\u636e\u5e93\u7ba1\u7406\u89d2\u8272\uff1adbAdmin\u3001dbOwner\u3001userAdmin\uff1b\n\n\u96c6\u7fa4\u7ba1\u7406\u89d2\u8272\uff1aclusterAdmin\u3001clusterManager\u3001clusterMonitor\u3001hostManager\uff1b\n\n\u5907\u4efd\u6062\u590d\u89d2\u8272\uff1abackup\u3001restore\uff1b\n\n\u6240\u6709\u6570\u636e\u5e93\u89d2\u8272\uff1areadAnyDatabase\u3001readWriteAnyDatabase\u3001userAdminAnyDatabase\u3001dbAdminAnyDatabase\n\n\u8d85\u7ea7\u7528\u6237\u89d2\u8272\uff1aroot // \u8fd9\u91cc\u8fd8\u6709\u51e0\u4e2a\u89d2\u8272\u95f4\u63a5\u6216\u76f4\u63a5\u63d0\u4f9b\u4e86\u7cfb\u7edf\u8d85\u7ea7\u7528\u6237\u7684\u8bbf\u95ee\uff08dbOwner \u3001userAdmin\u3001userAdminAnyDatabase\uff09\n\n\u5185\u90e8\u89d2\u8272\uff1asystem\n\n\u89d2\u8272\u8bf4\u660e\uff1a\n\nRead\uff1a\u5141\u8bb8\u7528\u6237\u8bfb\u53d6\u6307\u5b9a\u6570\u636e\u5e93\n\nreadWrite\uff1a\u5141\u8bb8\u7528\u6237\u8bfb\u5199\u6307\u5b9a\u6570\u636e\u5e93\n\ndbAdmin\uff1a\u5141\u8bb8\u7528\u6237\u5728\u6307\u5b9a\u6570\u636e\u5e93\u4e2d\u6267\u884c\u7ba1\u7406\u51fd\u6570\uff0c\u5982\u7d22\u5f15\u521b\u5efa\u3001\u5220\u9664\uff0c\u67e5\u770b\u7edf\u8ba1\u6216\u8bbf\u95eesystem.profile\n\nuserAdmin\uff1a\u5141\u8bb8\u7528\u6237\u5411system.users\u96c6\u5408\u5199\u5165\uff0c\u53ef\u4ee5\u627e\u6307\u5b9a\u6570\u636e\u5e93\u91cc\u521b\u5efa\u3001\u5220\u9664\u548c\u7ba1\u7406\u7528\u6237\n\nclusterAdmin\uff1a\u53ea\u5728admin\u6570\u636e\u5e93\u4e2d\u53ef\u7528\uff0c\u8d4b\u4e88\u7528\u6237\u6240\u6709\u5206\u7247\u548c\u590d\u5236\u96c6\u76f8\u5173\u51fd\u6570\u7684\u7ba1\u7406\u6743\u9650\u3002\n\nreadAnyDatabase\uff1a\u53ea\u5728admin\u6570\u636e\u5e93\u4e2d\u53ef\u7528\uff0c\u8d4b\u4e88\u7528\u6237\u6240\u6709\u6570\u636e\u5e93\u7684\u8bfb\u6743\u9650\n\nreadWriteAnyDatabase\uff1a\u53ea\u5728admin\u6570\u636e\u5e93\u4e2d\u53ef\u7528\uff0c\u8d4b\u4e88\u7528\u6237\u6240\u6709\u6570\u636e\u5e93\u7684\u8bfb\u5199\u6743\u9650\n\nuserAdminAnyDatabase\uff1a\u53ea\u5728admin\u6570\u636e\u5e93\u4e2d\u53ef\u7528\uff0c\u8d4b\u4e88\u7528\u6237\u6240\u6709\u6570\u636e\u5e93\u7684userAdmin\u6743\u9650\n\ndbAdminAnyDatabase\uff1a\u53ea\u5728admin\u6570\u636e\u5e93\u4e2d\u53ef\u7528\uff0c\u8d4b\u4e88\u7528\u6237\u6240\u6709\u6570\u636e\u5e93\u7684dbAdmin\u6743\u9650\u3002\n\nroot\uff1a\u53ea\u5728admin\u6570\u636e\u5e93\u4e2d\u53ef\u7528\u3002\u8d85\u7ea7\u8d26\u53f7\uff0c\u8d85\u7ea7\u6743\u9650\n")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"\u6dfb\u52a0\u7ba1\u7406\u5458")),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{}),'use admin\n\ndb.createUser({\n    user:"admin",\n    pwd:"admin",\n    roles:[{\n        role:"root",            //root \u8868\u793a\u6700\u9ad8\u6743\u9650\n        db:"admin"\n    }]\n})\n\ndb.auth("admin", "admin")\n')),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"\u6dfb\u52a0\u7528\u6237")),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{}),'use db_dev\n\ndb.createUser({\n    user:"leo_dev",\n    pwd:"123456",\n    roles:[{\n        role:"dbAdmin",                 //dbAdmin \u5176\u5b9e\u662f\u6ca1\u6709\u8bfb\u5199\u6743\u9650\u7684\n        db:"db_dev"\n    },{\n        role:"readWrite",\n        db:"db_dev"\n    }]\n})\n\ndb.auth("leo_dev", "123456")\n')),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{}),'use db_prod\n\ndb.createUser({\n    user:"leo_prod",\n    pwd:"123456",\n    roles:[{\n        role:"dbAdmin",                 //dbAdmin \u5176\u5b9e\u662f\u6ca1\u6709\u8bfb\u5199\u6743\u9650\u7684\n        db:"db_prod"\n    },{\n        role:"readWrite",\n        db:"db_prod"\n    }]\n})\n\ndb.auth("db_prod", "123456")\n')),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"\u5f00\u542f",Object(o.b)("inlineCode",{parentName:"li"},"mongo"),"\u6743\u9650\u8ba4\u8bc1")),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{}),"vim /etc/mongod.conf\n")),Object(o.b)("h3",{id:"mongo-shell"},"Mongo shell"),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"GUI: ")," ",Object(o.b)("inlineCode",{parentName:"p"},"Robo 3T free")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"basic"))),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{}),"db                     // \u67e5\u770b\u5f53\u524d\u7528\u6237\ndb.auth(uname,pwd)     // \u767b\u9646\nshow dbs               // \u67e5\u770b\u6240\u6709\u5e93\n\nuse [dbname]           // \u4f7f\u7528[dbname]\u5e93\n\ndb.collectionName.insertOne({\n    xxx:'',\n    xx2:''\n})                     // \u5411[collectionName]\u63d2\u5165\u4e00\u6761\u6570\u636e\n\ndb.collectionName.find().pretty()\ndb.getCollection(\"name\").find()\n                       // \u67e5\u8be2[collectionName]\n                       // .pretty() \u683c\u5f0f\u5316(\u4f18\u5316)\u663e\u793a\n                       // .find({})   {} \u5185\u9650\u5b9a\u67e5\u8be2\u6761\u4ef6\uff0c\u7a7a\u4e3a\u67e5\u6240\u6709\n\n<tab>                  // \u53ef\u8865\u5168\u547d\u4ee4\nquit | <ctrl-C>        // \u9000\u51faMongo shell\n\n")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"CRUD"))),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{}),"db.collection.insert()          // \u63d2\u5165\u4e00\u6761\u6216\u591a\u6761\ndb.collection.insertOne()       // \u63d2\u5165\u4e00\u6761\ndb.collection.insertMany()      // \u63d2\u5165\u591a\u6761\n\ndb.collection.find()\n\n\ndb.collection.updateOne()\ndb.collection.updateMany()\ndb.collection.replaceOne()\n\ndb.collection.deleteOne()\ndb.collection.deleteMany()\n")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"Query Operators"))),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{}),'{}\n\n// where\n$in         // db.inventory.find( { status: { $in: [ "A", "D" ] } } )\n\n// AND Conditions\ndb.inventory.find( { status: "A", qty: { $lt: 30 } } )\n\n// OR Conditions\ndb.inventory.find( { $or: [ { status: "A" }, { qty: { $lt: 30 } } ] } )\n\n// AND  OR\ndb.inventory.find( {\n     status: "A",\n     $or: [ { qty: { $lt: 30 } }, { item: /^p/ } ]\n} )\n\n// \u6b63\u5219\n$regex\n\n')))}l.isMDXComponent=!0},228:function(e,n,t){"use strict";t.d(n,"a",(function(){return u})),t.d(n,"b",(function(){return m}));var r=t(0),a=t.n(r);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function b(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?b(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var d=a.a.createContext({}),l=function(e){var n=a.a.useContext(d),t=n;return e&&(t="function"==typeof e?e(n):c(c({},n),e)),t},u=function(e){var n=l(e.components);return a.a.createElement(d.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return a.a.createElement(a.a.Fragment,{},n)}},s=a.a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,b=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),u=l(t),s=r,m=u["".concat(b,".").concat(s)]||u[s]||p[s]||o;return t?a.a.createElement(m,c(c({ref:n},d),{},{components:t})):a.a.createElement(m,c({ref:n},d))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,b=new Array(o);b[0]=s;var c={};for(var i in n)hasOwnProperty.call(n,i)&&(c[i]=n[i]);c.originalType=e,c.mdxType="string"==typeof e?e:r,b[1]=c;for(var d=2;d<o;d++)b[d]=t[d];return a.a.createElement.apply(null,b)}return a.a.createElement.apply(null,t)}s.displayName="MDXCreateElement"}}]);